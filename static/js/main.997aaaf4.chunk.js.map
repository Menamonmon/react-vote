{"version":3,"sources":["helpers/auth.js","contexts/AuthConext.js","helpers/requests.js","helpers/elections.js","components/DropdownMenu.js","components/Nav.js","components/ProtectedRoute.js","pages/Home.js","components/FormError.js","pages/LoginForm.js","pages/LogoutPage.js","components/ResultBox.js","pages/ResultsPage.js","helpers/passwordValidations.js","pages/SignupForm.js","components/Vote.js","pages/VotesPage.js","components/Election.js","components/ElectionRoutes.js","App.js","index.js"],"names":["addRequestsTokenToAxios","token","axios","defaults","headers","common","removeRequestsTokenFromAxios","initialAuth","isAuthenticated","user","elections","votes","electionLinks","APIUrl","AuthContext","createContext","window","onbeforeunload","localStorage","clear","AuthProvider","children","useState","auth","setAuth","login","userData","successCb","errorCb","isSignup","requestUrl","post","then","response","data","p","JSON","parse","stringify","setItem","syncUserData","catch","error","console","log","electionsUrl","votesUrl","electionsPromise","get","votesPromise","Promise","all","getUserData","electionsResponse","votesResponse","links","map","_type","state","year","id","path","generatePath","type","content","election_id","generateElectionLinks","useEffect","Boolean","getItem","Error","Provider","value","logout","signup","useAuth","useContext","DropdownMenuLinks","props","className","index","to","DropdownMenu","length","AuthenticatedNavLinks","navToggled","UnauthenticatedNavLinks","Navbar","setNavToggled","onClick","prev","ProtectedRoute","Component","component","rest","render","pathname","redirect","from","location","UnprotectedRoute","Home","href","FormError","errors","includes","containerClassName","e","initialLoginData","username","password","initialLoginErrorsData","LoginForm","history","useHistory","formData","setForm","setErrors","handleChange","target","name","errorComponents","final","Object","keys","key","currentErrors","errorToFormErrorComponent","placeholder","onChange","fd","fieldsAreMissing","field","trim","errorList","push","replaceAll","entries","validateFormData","status","usernameErrors","LogoutPage","CandidateResult","party","voteCount","ArrowButton","toggled","CandidatesResultsContainer","candidates","vote_count","ResultBox","election","candidate_set","setToggled","ResultsPage","initialSignupData","confirm_password","initialSignupErrorsData","SignupForm","statesList","setStatesList","passwordsValidation","password2","minLength","maxLength","test","concat","signupPasswordValidation","confirmPasswordErrorList","Vote","candidate","link","title","style","textDecoration","VotesPage","getElectionLink","CandidateBox","checked","CurrentCandidate","ElectionFooter","currentCandidate","onSubmit","onDelete","Election","setVote","loadVotes","setCurrentCandidate","vote","Array","fill","checkedCandidates","setCheckedCandidates","candidate_id","matchingCandidates","filter","candidateIndex","indexOf","prevState","values","undefined","submitVote","voteId","delete","deleteVote","ElectionRoutes","electionComponenets","electionsList","exact","App","document","getElementById"],"mappings":"yNAEO,IAyBMA,EAA0B,SAACC,GAMtCC,IAAMC,SAASC,QAAQC,OAAvB,8BAA0DJ,IAG/CK,EAA+B,WAK1CJ,IAAMC,SAASC,QAAQC,OAAvB,cAAiD,MC/B7CE,EAAc,CAClBC,iBAAiB,EACjBC,KAAM,CAAEC,UAAW,GAAIC,MAAO,GAAIC,cAAe,IACjDC,OAAQ,IAGGC,EAAcC,wBAAc,IAEzCC,OAAOC,eAAiB,WACtBC,aAAaC,SAGR,IAAMC,EAAe,SAAC,GAA0B,IAAxBP,EAAuB,EAAvBA,OAAQQ,EAAe,EAAfA,SACrCd,EAAYM,OAASA,EAD+B,MAE9BS,mBAASf,GAFqB,mBAE/CgB,EAF+C,KAEzCC,EAFyC,KAoBpD,SAASC,EACPC,GAIC,IAHDC,EAGA,uDAHY,aACZC,EAEA,uDAFU,aACVC,EACA,wDACMC,EAAU,UAAMjB,EAAN,oBAAwBgB,EAAW,WAAa,QAAhD,KAChB3B,IACG6B,KAAKD,EAAYJ,GACjBM,MAAK,SAACC,GAAc,IACXhC,EAAUgC,EAASC,KAAnBjC,MACJA,GACFuB,GAAQ,SAACW,GAIP,OAHAA,EAAIC,KAAKC,MAAMD,KAAKE,UAAUH,KAC5B3B,iBAAkB,EACpBU,aAAaqB,QAAQ,kBAAmBJ,EAAE3B,iBACnC2B,KAGXnC,EAAwBC,GACxBuC,IACAb,EAAUM,MAEXQ,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZd,EAAQc,MAwBd,SAASF,IACP,OC1FG,SAAqB3B,GAC1B,IAAMgC,EAAY,UAAMhC,EAAN,cACZiC,EAAQ,UAAMjC,EAAN,UACRkC,EAAmB7C,IAAM8C,IAAIH,GAC7BI,EAAe/C,IAAM8C,IAAIF,GAC/B,OAAOI,QAAQC,IAAI,CAACJ,EAAkBE,IDqF7BG,CAAY7B,EAAKV,QACrBmB,MAAK,SAACC,GAAc,IAAD,cACyBA,EADzB,GACXoB,EADW,KACQC,EADR,KAEZ5C,EAAY2C,EAAkBnB,KAC9BvB,EAAQ2C,EAAcpB,KACtBtB,EE/FP,SAA+BF,GACpC,IAAM6C,EAAQ7C,EAAU8C,KAAI,gBAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,MAAOC,EAAjB,EAAiBA,KAAMC,EAAvB,EAAuBA,GAAvB,MAAiC,CAC3DC,KAAMC,YAAa,gCAAiC,CAClDH,OACAD,QACAK,KAAMN,IAERO,QAAQ,GAAD,OAAKP,EAAL,aAAeC,EAAf,YAAwBC,EAAxB,KACPM,YAAaL,MAGf,OADAjB,QAAQC,IAAIW,GACLA,EFoFqBW,CAAsBxD,GACtCD,EAAO,CAAEC,YAAWC,QAAOC,iBACjCM,aAAaqB,QAAQ,OAAQH,KAAKE,UAAU7B,IAE5Ce,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAgB1B,eAEzBgC,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAIlB,OAlFAyB,qBAAU,WACR,IAAI3D,EAAkB4D,QAAQlD,aAAamD,QAAQ,oBACnD7D,GAAsC,IAApBA,EAClB,IAAIC,EAAO,GACX,IAEE,KADAA,EAAO2B,KAAKC,MAAMnB,aAAamD,QAAQ,UAErC,MAAM,IAAIC,MAAM,gBAElB,MAAO5B,GACPjC,EAAOF,EAAYE,KAGrBe,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAgB3B,kBAAiBC,cACxC,IAqED,cAACK,EAAYyD,SAAb,CAAsBC,MAAK,2BAAOjD,GAAP,IAAaE,QAAOgD,OAtCjD,WAA2D,IAA3C9C,EAA0C,uDAA9B,aAAUC,EAAoB,uDAAV,aAC9CV,aAAaqB,QAAQ,mBAAmB,GACxCrB,aAAaqB,QAAQ,OAAQH,KAAKE,UAAU/B,EAAYE,OACxDe,EAAQjB,GACRL,IACG8C,IADH,UACUnC,EADV,oBAEGmB,MAAK,SAACC,GACLN,EAAUM,MAEXQ,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZd,EAAQc,MAEZpC,KAyBuDoE,OAtBzD,SAAgBhD,GAAqD,IAA3CC,EAA0C,uDAA9B,aAAUC,EAAoB,uDAAV,aACxDH,EAAMC,EAAUC,EAAWC,GAAS,IAqB2BY,iBAA/D,SACGnB,KAKA,SAASsD,IAGd,OAFgBC,qBAAW9D,GGjHtB,SAAS+D,EAAkBC,GAAQ,IAChCvB,EAAUuB,EAAVvB,MACR,OACE,oBAAIwB,UAAU,qBAAd,SACGxB,EAAMC,KAAI,WAAoBwB,GAApB,IAAGhB,EAAH,EAAGA,QAASH,EAAZ,EAAYA,KAAZ,OACT,cAAC,IAAD,CAAMoB,GAAIpB,EAAV,SACE,oBAAIkB,UAAU,oBAAd,SACGf,GADoCA,IADpBgB,QAUd,SAASE,EAAaJ,GAAQ,IACnCvB,EAAoBuB,EAApBvB,MAAOlC,EAAayD,EAAbzD,SAEf,OACE,sBAAK0D,UAAU,eAAf,UACG1D,EACiB,IAAjBkC,EAAM4B,OAAe,6BAAQ,cAACN,EAAD,CAAmBtB,MAAOA,OCD9D,SAAS6B,EAAT,GAA+D,IAA9BC,EAA6B,EAA7BA,WAAYzE,EAAiB,EAAjBA,cAC3C,OACE,qBAAImE,UAAS,oBAAeM,EAAa,OAAS,IAAlD,UACE,cAACH,EAAD,CAAc3B,MAAO3C,EAArB,SACE,oBAAImE,UAAU,wBAAd,wBADsC,aAGxC,cAAC,IAAD,CAAME,GAAG,WAAT,SACE,oBAAIF,UAAU,wBAAd,sBADsB,WAGxB,cAAC,IAAD,CAAME,GAAG,SAAT,SACE,oBAAIF,UAAU,wBAAd,yBADoB,SAGtB,cAAC,IAAD,CAAME,GAAG,UAAT,SACE,oBAAIF,UAAU,yBAAd,qBADqB,aAO7B,SAASO,EAAT,GAAkD,IAAfD,EAAc,EAAdA,WACjC,OACE,qBAAIN,UAAS,oBAAeM,EAAa,OAAS,IAAlD,UACE,cAAC,IAAD,CAAMJ,GAAG,SAAT,SACE,oBAAIF,UAAU,yBAAd,oBADoB,SAGtB,cAAC,IAAD,CAAME,GAAG,UAAT,SACE,oBAAIF,UAAU,wBAAd,sBADqB,aAOd,SAASQ,IAAU,IAAD,EAI3BZ,IAFFnE,EAF6B,EAE7BA,gBACQI,EAHqB,EAG7BH,KAAQG,cAHqB,EAKGU,oBAAS,GALZ,mBAK1B+D,EAL0B,KAKdG,EALc,KAU/B,OACE,sBAAKT,UAAU,SAAf,UACE,cAAC,IAAD,CAAME,GAAG,IAAT,SACE,oBAAIF,UAAU,WAAd,0BAEF,sBAAKA,UAAS,oBAAeM,EAAa,OAAS,IAAMI,QAT9C,WACbD,GAAc,SAACE,GAAD,OAAWA,MAQvB,UACE,qBAAKX,UAAU,gBACf,qBAAKA,UAAU,gBACf,qBAAKA,UAAU,mBAEhBvE,EACC,cAAC4E,EAAD,CACEC,WAAYA,EACZzE,cAAeA,IAGjB,cAAC0E,EAAD,CAAyBD,WAAYA,O,YC7E9B,SAASM,EAAT,GAA4D,IAAvBC,EAAsB,EAAjCC,UAAyBC,EAAQ,6BAChEtF,EAAoBmE,IAApBnE,gBACR,OACE,cAAC,IAAD,2BACMsF,GADN,IAEEC,OAAQ,SAACjB,GACP,OAAItE,EACK,cAACoF,EAAD,eAAed,IAGpB,cAAC,IAAD,CACEG,GAAI,CACFe,SAAUlB,EAAMmB,SAChBvC,MAAO,CAAEwC,KAAMpB,EAAMqB,iBAU9B,SAASC,EAAT,GAA8D,IAAvBR,EAAsB,EAAjCC,UAAyBC,EAAQ,6BAC1DtF,EAAoBmE,IAApBnE,gBACR,OACE,cAAC,IAAD,2BACMsF,GADN,IAEEC,OAAQ,SAACjB,GACP,OAAKtE,EAID,cAAC,IAAD,CACEyE,GAAI,CACFe,SAAUlB,EAAMmB,SAChBvC,MAAO,CAAEwC,KAAMpB,EAAMqB,aANpB,cAACP,EAAD,eAAed,QChCjB,SAASuB,IACtB,OACE,sBAAKtB,UAAU,qBAAf,UACE,oBAAIA,UAAU,kBAAd,oCACA,qBAAIA,UAAU,qBAAd,iWAME,mBAAGuB,KAAK,gCAAR,kCANF,U,oBCJS,SAASC,EAAUzB,GAAQ,IAChC0B,EAAiB1B,EAAjB0B,OAAQzC,EAASe,EAATf,KAChB,IAAK,CAAC,UAAW,SAAS0C,SAAS1C,GACjC,OAAO,oEAET,IAAM2C,EAAkB,qBAAiB3C,GACzC,OACE,qBAAKgB,UAAW2B,EAAhB,SACE,oBAAI3B,UAAU,aAAd,SACGyB,EAAOhD,KAAI,SAACmD,GAAD,OACV,6BAAaA,GAAJA,UCNnB,IAAMC,EAAmB,CACvBC,SAAU,GACVC,SAAU,IAGNC,EAAyB,CAC7BF,SAAU,GACVC,SAAU,IAiBG,SAASE,EAAUlC,GACXA,EAAbmB,SADgC,IAEhCxE,EAAUkD,IAAVlD,MACFwF,EAAUC,cAHuB,EAMb5F,mBAASsF,GANI,mBAMlCO,EANkC,KAMxBC,EANwB,OAOb9F,mBAASyF,GAPI,mBAOlCP,EAPkC,KAO1Ba,EAP0B,KAsDjCC,EAAe,SAACX,GAAO,IAAD,EACFA,EAAEY,OAAlBC,EADkB,EAClBA,KAAMhD,EADY,EACZA,MACd4C,GAAQ,SAAC1B,GAAD,mBAAC,eAAeA,GAAhB,kBAAuB8B,EAAOhD,QAIlCiD,EA1ER,SAAmCjB,GAGjC,IAFA,IACMkB,EAAQ,GACd,MAFaC,OAAOC,KAAKpB,GAEzB,eAAsB,CAAjB,IAAIqB,EAAG,KACNC,EAAgBtB,EAAOqB,GACvBnF,EAAQ,6BACRoF,EAAc3C,OAAS,IACzBzC,EAAQ,cAAC6D,EAAD,CAAWC,OAAQsB,EAAe/D,KAAK,WAEjD2D,EAAMG,GAAOnF,EAEf,OAAOgF,EA+DiBK,CAA0BvB,GAClD,OACE,uBAAMzB,UAAU,sBAAhB,UACE,oBAAIA,UAAU,kCAAd,iCACA,wBAAOA,UAAU,yBAAjB,sBAEE,uBACEhB,KAAK,OACLiE,YAAY,WACZxD,MAAO2C,EAASN,SAChBoB,SAAUX,EACVvC,UAAU,kCACVyC,KAAK,aAENC,EAAgBZ,YAEnB,wBAAO9B,UAAU,yBAAjB,sBAEE,uBACEhB,KAAK,WACLiE,YAAY,WACZxD,MAAO2C,EAASL,SAChBmB,SAAUX,EACVvC,UAAU,kCACVyC,KAAK,aAENC,EAAgBX,YAEnB,wBACE/B,UAAU,gCACVhB,KAAK,SACL0B,QAjEa,SAACkB,GAGlB,GAFAU,EAAUN,IAjBa,SAACmB,GAExB,IADA,IAAIC,GAAmB,EADQ,uCAEnBC,EAFmB,KAGT,KAHS,KAGpBC,SACPF,GAAmB,EACnBd,GAAU,SAAC3B,GACT,IAAM4C,EAAS,YAAO5C,EAAK0C,IAE3B,OADAE,EAAUC,KAAV,UAAkBH,EAAMI,WAAW,IAAK,KAAxC,iBACO,2BAAK9C,GAAZ,kBAAmB0C,EAAQE,SANjC,MAA4BX,OAAOc,QAAQP,GAA3C,eAAiD,IAUjD,OAAQC,EAMgBO,CAAiBvB,GAEvC,OAAO,EAoBT1F,EAAM0F,GAjBN,WACEF,EAAQsB,KAAK,QAGf,SAA4B7F,GAC1B,IAAKA,EAAMT,UAAsC,MAA1BS,EAAMT,SAAS0G,OAEpC,OADAhG,QAAQC,IAAIF,IACL,EAGT2E,GAAU,SAAC3B,GACT,IAAMkD,EAAc,YAAOlD,EAAKmB,UAEhC,OADA+B,EAAeL,KAHI,qCAIZ,2BAAK7C,GAAZ,IAAkBmB,SAAU+B,WA0C9B,sBClHS,SAASC,IAAc,IAC5BpE,EAAWE,IAAXF,OAMR,OAJAN,qBAAU,WACRM,MACC,IAGD,sBAAKM,UAAU,kCAAf,UACE,oBAAIA,UAAU,+CAAd,oBACA,oBAAIA,UAAU,oCAAd,8CAGA,sBAAKA,UAAU,gBAAf,UACE,cAAC,IAAD,CAAME,GAAG,SAAT,yBAAsB,SAGtB,uBAJF,yBAKyB,IACvB,cAAC,IAAD,CAAMA,GAAG,UAAT,oBAAuB,UAEf,IARV,mBCfC,SAAS6D,EAAT,GAA0D,IAA/BlF,EAA8B,EAA9BA,GAAI4D,EAA0B,EAA1BA,KAAMuB,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,UACjD,OACE,qBAAKjE,UAAU,uBAAf,SACE,qBAAIA,UAAU,sCAAd,oBACMyC,EADN,aACeuB,EADf,KAEE,uBAFF,eAGeC,MAJ0BpF,GAUxC,SAASqF,EAAT,GAA4C,IAArBC,EAAoB,EAApBA,QAASzD,EAAW,EAAXA,QACrC,OACE,qBAAKA,QAASA,EAASV,UAAS,oBAAemE,EAAU,OAAS,IAAlE,oBAMG,SAASC,EAAT,GAA8D,IAAxBD,EAAuB,EAAvBA,QAASE,EAAc,EAAdA,WACpD,OACE,qBAAKrE,UAAS,uCAAkCmE,EAAU,OAAS,IAAnE,SACGE,EAAW5F,KAAI,gBAAGI,EAAH,EAAGA,GAAI4D,EAAP,EAAOA,KAAMuB,EAAb,EAAaA,MAAOM,EAApB,EAAoBA,WAApB,OACd,cAACP,EAAD,CACEtB,KAAMA,EACNuB,MAAOA,EACPC,UAAWK,GACNzF,QAOA,SAAS0F,EAAT,GAEX,IAAD,IADDC,SAAY9F,EACX,EADWA,MAAOC,EAClB,EADkBA,MAAOC,EACzB,EADyBA,KAAM6F,EAC/B,EAD+BA,cAC/B,EAC6BlI,oBAAS,GADtC,mBACM4H,EADN,KACeO,EADf,KAMD,OACE,sBAAK1E,UAAU,2BAA2BU,QAL5C,WACEgE,GAAW,SAAC/D,GAAD,OAAWA,MAItB,UACE,sBAAKX,UAAU,oBAAf,UACE,oBAAIA,UAAU,qBAAd,mBAAuCtB,EAAvC,aAAiDE,EAAjD,YAAyDD,EAAzD,OACA,cAACuF,EAAD,CAAaC,QAASA,MAFe,qBAIvC,cAACC,EAAD,CACEC,WAAYI,EACZN,QAASA,OCjDF,SAASQ,IAAe,IAE3BhJ,EACNiE,IADFlE,KAAQC,UAEV,OACE,sBAAKqE,UAAU,yBAAf,UACE,oBAAIA,UAAU,kBAAd,6CACCrE,EAAU8C,KAAI,SAAC+F,GAAD,OACb,cAACD,EAAD,CAAWC,SAAUA,UCE7B,ICNMI,EAAoB,CACxB9C,SAAU,GACVnD,MAAO,GACPoD,SAAU,GACV8C,iBAAkB,IAGdC,EAA0B,CAC9BhD,SAAU,GACVnD,MAAO,GACPoD,SAAU,GACV8C,iBAAkB,IAiBL,SAASE,EAAT,GAAmC,IAAb7D,EAAY,EAAZA,SAAY,EACpBtB,IAAnBD,EADuC,EACvCA,OAAQ7D,EAD+B,EAC/BA,OACVoG,EAAUC,cAF+B,EAGb5F,mBAAS,IAHI,mBAG1CyI,EAH0C,KAG9BC,EAH8B,KAK/C7F,qBAAU,WACRjE,IACG8C,IADH,UACUnC,EADV,iBAEGmB,MAAK,YAAe,IAAZE,EAAW,EAAXA,KACPA,EAAOA,EAAKsB,KAAI,yCAAuB,CAAEgB,MAAzB,KAAgCR,QAAhC,SAChBgG,EAAc9H,MAEfO,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAEf,IAf4C,MAkBrBpB,mBAASqI,GAlBY,mBAkB1CxC,EAlB0C,KAkBhCC,EAlBgC,OAmBrB9F,mBAASuI,GAnBY,mBAmB1CrD,EAnB0C,KAmBlCa,EAnBkC,KAsFzCC,EAAe,SAACX,GAAO,IAAD,EACFA,EAAEY,OAAlBC,EADkB,EAClBA,KAAMhD,EADY,EACZA,MACd4C,GAAQ,SAAC1B,GAAD,mBAAC,eAAeA,GAAhB,kBAAuB8B,EAAOhD,QAIlCiD,EA1GR,SAAmCjB,GAGjC,IAFA,IACMkB,EAAQ,GACd,MAFaC,OAAOC,KAAKpB,GAEzB,eAAsB,CAAjB,IAAIqB,EAAG,KACNC,EAAgBtB,EAAOqB,GACvBnF,EAAQ,6BACRoF,EAAc3C,OAAS,IACzBzC,EAAQ,cAAC6D,EAAD,CAAWC,OAAQsB,EAAe/D,KAAK,WAEjD2D,EAAMG,GAAOnF,EAEf,OAAOgF,EA+FiBK,CAA0BvB,GAClD,OACE,uBAAMzB,UAAU,sBAAhB,UACE,oBAAIA,UAAU,kCAAd,mCACA,wBAAOA,UAAU,0BAAjB,sBAEE,uBACEhB,KAAK,OACLiE,YAAY,WACZxD,MAAO2C,EAASN,SAChBoB,SAAUX,EACVvC,UAAU,mCACVyC,KAAK,aAENC,EAAgBZ,YAEnB,wBAAO9B,UAAU,0BAAjB,mBAEE,wBACEP,MAAO2C,EAASzD,MAChBuE,SAAUX,EACVvC,UAAU,8CACVyC,KAAK,QAJP,SAMGuC,EAAWvG,KAAI,gBAAGgB,EAAH,EAAGA,MAAOR,EAAV,EAAUA,QAAV,OACd,wBAAoBQ,MAAOA,EAA3B,SACGR,GADUQ,QAKhBiD,EAAgB/D,SAEnB,wBAAOqB,UAAU,0BAAjB,sBAEE,uBACEhB,KAAK,WACLiE,YAAY,WACZxD,MAAO2C,EAASL,SAChBmB,SAAUX,EACVvC,UAAU,mCACVyC,KAAK,aAENC,EAAgBX,YAEnB,wBAAO/B,UAAU,0BAAjB,8BAEE,uBACEhB,KAAK,WACLiE,YAAY,mBACZxD,MAAO2C,EAASyC,iBAChB3B,SAAUX,EACVvC,UAAU,2CACVyC,KAAK,qBAENC,EAAgBmC,oBAEnB,wBACE7E,UAAU,gCACVhB,KAAK,SACL0B,QA7Fa,SAACkB,GAGlB,GAFAU,EAAUwC,IArCa,SAAC3B,GAExB,IADA,IAAIC,GAAmB,EADQ,uCAEnBC,EAFmB,KAGT,KAHS,KAGpBC,SACPF,GAAmB,EACnBd,GAAU,SAAC3B,GACT,IAAM4C,EAAS,YAAO5C,EAAK0C,IAE3B,OADAE,EAAUC,KAAV,UAAkBH,EAAMI,WAAW,IAAK,KAAxC,iBACO,2BAAK9C,GAAZ,kBAAmB0C,EAAQE,SANjC,MAA4BX,OAAOc,QAAQP,GAA3C,eAAiD,IAUjD,GAAIC,EACF,OAAO,EAbsB,IAiBzB8B,ED7DuB,SAC/BnD,EACAoD,GAGI,IAFJC,EAEG,uDAFS,EACZC,EACG,uDADS,GAER5D,EAAS,GAUb,OATIM,IAAaoD,GACf1D,EAAO+B,KAAP,2BAEEzB,EAAS3B,OAASgF,GAAarD,EAAS3B,OAASiF,IACnD5D,EAAO+B,KAAP,gDAC2C4B,EAD3C,gBAC4DC,IAGtC,uCACHC,KAAKvD,GAQJ,IAAlBN,EAAOrB,QACFqB,EARPA,EAASA,EAAO8D,OAAO,CACrB,wDACA,wDACA,gDCyC0BC,CADWrC,EAA/BpB,SAA+BoB,EAArB0B,kBAKlB,OAA4B,IAAxBK,IAGF5C,GAAU,SAAC3B,GACT,IAAI8E,EAAwB,YAAO9E,EAAKkE,kBAIxC,OAHAY,EAA2BA,EAAyBF,OAClDL,GAEK,2BAAKvE,GAAZ,IAAkBkE,iBAAkBY,QAGjC,GAMiB9B,CAAiBvB,GAEvC,OAAO,EAoBTzC,EAAOyC,GAjBP,WACEF,EAAQsB,KAAKtC,MAGf,SAA6BvD,GAC3B,IAAKA,EAAMT,UAAsC,MAA1BS,EAAMT,SAAS0G,OAEpC,OADAhG,QAAQC,IAAIF,IACL,EAGT2E,GAAU,SAAC3B,GACT,IAAMkD,EAAc,YAAOlD,EAAKmB,UAEhC,OADA+B,EAAeL,KAHI,qCAIZ,2BAAK7C,GAAZ,IAAkBmB,SAAU+B,WAsE9B,wB,YCrLS,SAAS6B,EAAT,GAA8C,IAA9BlB,EAA6B,EAA7BA,SAAUmB,EAAmB,EAAnBA,UAAWC,EAAQ,EAARA,KAClD,OACE,cAAC,IAAD,CACE1F,GAAI0F,EAAK9G,KACT+G,MAAM,sBACNC,MAAO,CAAEC,eAAgB,QAH3B,SAKE,sBAAK/F,UAAU,yBAAf,UACE,qBAAIA,UAAU,gBAAd,0BACSwE,EAAS7F,MADlB,YAC2B6F,EAAS9F,MADpC,aAC8C8F,EAAS5F,KADvD,QAGA,qBAAIoB,UAAU,gBAAd,0BACS2F,EAAUlD,KADnB,aAC4BkD,EAAU3B,MADtC,aCVO,SAASgC,IAAa,IAAD,EAG9BpG,IADFlE,KAAQE,EAFwB,EAExBA,MAAOC,EAFiB,EAEjBA,cAGjB,SAASoK,EAAgBzB,EAAUhG,GAAQ,IAAD,EAChCK,EAAO2F,EAAP3F,GADgC,cAErBL,GAFqB,IAExC,2BAA0B,CAAC,IAAhBoH,EAAe,QACxB,GAAIA,EAAK1G,cAAgBL,EACvB,OAAO+G,GAJ6B,8BAOxC,MAAM,IAAIrG,MAAM,2BAElB,OACE,sBAAKS,UAAU,uBAAf,UACE,oBAAIA,UAAU,kCAAd,kCACA,oBAAIA,UAAU,qBAAd,SAAoC,mCACnCpE,EAAM6C,KAAI,gBAAGI,EAAH,EAAGA,GAAI2F,EAAP,EAAOA,SAAUmB,EAAjB,EAAiBA,UAAjB,OACT,cAACD,EAAD,CACEC,UAAWA,EACXnB,SAAUA,EACVoB,KAAMK,EAAgBzB,EAAU3I,IAC3BgD,SCvBR,SAASqH,EAAanG,GAAQ,IAC3B0C,EAAyB1C,EAAzB0C,KAAMuB,EAAmBjE,EAAnBiE,MAAOmC,EAAYpG,EAAZoG,QACrB,OACE,qBACEnG,UAAS,sCAAiCmG,EAAU,UAAY,IAChEzF,QAASX,EAAMW,QAFjB,SAIE,oBAAIV,UAAU,QAAd,mBAA0ByC,EAA1B,aAAmCuB,EAAnC,SAKN,IAAMoC,EAAmB,SAAC,GAAD,IAAG3D,EAAH,EAAGA,KAAH,OACvB,oBAAIzC,UAAU,uCAAd,SACGyC,EAAI,4BAAwBA,GAAS,6BAI1C,SAAS4D,EAAT,GAAmE,IAAzCC,EAAwC,EAAxCA,iBAAkBC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SACpD,OACE,sBAAKxG,UAAU,kBAAf,UACE,cAAC,EAAD,CAAkByC,KAAM6D,EAAiB7D,OACzC,wBACEzC,UAAU,oDACVU,QAAS8F,EAFX,wBAMA,wBACExG,UAAU,oDACVU,QAAS6F,EAFX,4BAUS,SAASE,EAAS1G,GAAQ,IAC/Bf,EAAsCe,EAAtCf,KAAMH,EAAgCkB,EAAhClB,GAAIF,EAA4BoB,EAA5BpB,MAAOC,EAAqBmB,EAArBnB,KAAMyF,EAAetE,EAAfsE,WADO,EAOlCzE,IAHF9D,EAJoC,EAIpCA,OACA2B,EALoC,EAKpCA,aACQ7B,EAN4B,EAMpCF,KAAQE,MAGVwD,qBAAU,WACRsH,EAAQC,EAAU/K,MACjB,IAXmC,MAaQW,mBAAS,IAbjB,mBAajC+J,EAbiC,KAafM,EAbe,OAchBrK,mBAAS,IAdO,mBAcjCsK,EAdiC,KAc3BH,EAd2B,OAeUnK,mBAC9CuK,MAAMzC,EAAWjE,QAAQ2G,MAAK,IAhBM,mBAejCC,EAfiC,KAedC,EAfc,KAmBtC,SAASN,EAAU/K,GAAQ,IAAD,gBACLA,GADK,IACxB,2BAA0B,CAAC,IAAhBiL,EAAe,QACxB,GAAIA,EAAKrC,SAAS3F,KAAOA,EAAI,CAAC,IAAD,aAC3B,IAAMqI,EAAeL,EAAKlB,UAAU9G,GAC9BsI,EAAqB9C,EAAW+C,QACpC,SAACzB,GAAD,OAAeA,EAAU9G,KAAOqI,KAElC,GAAkC,IAA9BC,EAAmB/G,OACrB,MAAMb,MAAM,0BAEd,IAAMoG,EAAYwB,EAAmB,GAC/BE,EAAiBhD,EAAWiD,QAAQ3B,GAQ1C,OAPAsB,GAAqB,SAAC7J,GAIpB,OAFAA,EAD2BiH,EAAWiD,QAAQhB,KACtB,EACxBlJ,EAAEiK,IAAkB,EACbjK,KAETwJ,EAAoBjB,GACd,CAAN,EAAOkB,GAjBoB,uCAFP,8BAsBxBI,EAAqBH,MAAMzC,EAAWjE,QAAQ2G,MAAK,IA6BrD,OACE,sBAAK/G,UAAU,+BAAf,UACE,oBAAIA,UAAU,gCAAd,mBACMrB,EADN,YACeK,EADf,uBACkCJ,EADlC,QAGA,oBAAIoB,UAAU,qBAAd,iDAGA,oBAAIA,UAAU,kBAAd,SACGqE,EAAW5F,KAAI,SAACkH,EAAW1F,GAAW,IAC7BwC,EAAoBkD,EAApBlD,KAAMuB,EAAc2B,EAAd3B,MAAOnF,EAAO8G,EAAP9G,GASrB,OACE,cAACqH,EAAD,CACEC,QAASa,EAAkB/G,GAC3BwC,KAAMA,EACNuB,MAAOA,EACPtD,QAbY,WACdkG,EAAoBjB,GACpBsB,GAAqB,SAACM,GAGpB,OAFAA,EAAUR,MAAK,GACfQ,EAAUtH,IAAS,EACZsH,OASF1I,QAKb,cAACwH,EAAD,CACEC,iBAAkBA,EAClBC,SA1DN,WACE,IAAMpJ,EAAO,CACX+B,YAAaL,EACbqI,aAAcZ,EAAiBzH,IAE7B+D,OAAO4E,OAAOrK,GAAMuE,cAAS+F,If7E9B,SAAoB3L,EAAQqB,GACjC,OAAOhC,IAAM6B,KAAN,UAAclB,EAAd,iBAAqCqB,Ge6E1CuK,CAAW5L,EAAQqB,GAAMF,MAAK,WAC5BQ,IAAeR,MAAK,WAClByJ,EAAQC,EAAU/K,WAmDlB4K,SA9CN,gBACeiB,IAATZ,OAIYY,IAAZZ,EAAKhI,If9FN,SAAoB/C,EAAQ6L,GACjC,OAAOxM,IAAMyM,OAAN,UAAgB9L,EAAhB,wBAAsC6L,Ie8F3CE,CAAW/L,EAAQ+K,EAAKhI,IAAI5B,MAAK,WAC/BQ,IAAeR,MAAK,WAClByJ,EAAQC,EAAU/K,UANpB8K,EAAQC,EAAU/K,SAY+BiD,GC5GxC,SAASiJ,IAAkB,IAAD,EAGnClI,IADFlE,KAAQG,EAF6B,EAE7BA,cAAeF,EAFc,EAEdA,UAEnBoM,ED8ID,SAAuBpM,GAC5B,OAAOA,EAAU8C,KAAI,gBAAGC,EAAH,EAAGA,MAAOG,EAAV,EAAUA,GAAIF,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,KAAM6F,EAA3B,EAA2BA,cAA3B,OACnB,cAACgC,EAAD,CACEzH,KAAMN,EACNG,GAAIA,EACJF,MAAOA,EACPC,KAAMA,EACNyF,WAAYI,OCrJYuD,CAAcrM,GAC1C,OACE,mCACGE,EAAc4C,KAAI,WAAWwB,GAAW,IAAnBnB,EAAkB,EAAlBA,KACZD,EAAOlD,EAAUsE,GAAjBpB,GAER,OACE,cAAC+B,EAAD,CACEqH,OAAK,EACLnJ,KAAMA,EAENoC,SAAS,IACTJ,UAPuB,kBAAMiH,EAAoB9H,KAK5CpB,QCDF,SAASqJ,IAGtB,OACE,qBAAKlI,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,EAAD,CAAclE,OALL,wCAKT,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOmM,OAAK,EAACnJ,KAAK,IAAIgC,UAAWQ,GAAU,QAC3C,cAACD,EAAD,CACE4G,OAAK,EACLnJ,KAAK,SACLoC,SAAS,IACTJ,UAAWmB,GACP,SAEN,cAACZ,EAAD,CACE4G,OAAK,EACLnJ,KAAK,UACLoC,SAAS,IACTJ,UAAWiE,GACP,UAEN,cAAC,IAAD,CACEkD,OAAK,EACLnJ,KAAK,UACLoC,SAAS,IACTJ,UAAWgD,GACP,UAEN,cAAClD,EAAD,CACEqH,OAAK,EACLnJ,KAAK,WACLoC,SAAS,IACTJ,UAAW6D,GACP,WAEN,cAAC/D,EAAD,CACEqH,OAAK,EACLnJ,KAAK,SACLoC,SAAS,IACTJ,UAAWkF,GACP,SAEN,cAAC8B,EAAD,cC1DZ9G,iBAAO,cAAC,EAAD,IAASmH,SAASC,eAAe,W","file":"static/js/main.997aaaf4.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const login = (userData, url, successCallback, errorCallback) => {\n  axios\n    .post(url, {\n      username: userData.username,\n      password: userData.password,\n    })\n    .then((res) => {\n      successCallback(res);\n    })\n    .catch((err) => {\n      errorCallback(err);\n    });\n};\n\nexport const logout = (url, successCallback, errorCallback) => {\n  axios\n    .post(url)\n    .then((res) => {\n      successCallback(res);\n    })\n    .catch((err) => {\n      errorCallback(err);\n    });\n};\n\nexport const addRequestsTokenToAxios = (token) => {\n  // axios.interceptors.request.use(config => {\n  //   config.headers.Authorization = token;\n  //   config.headers['Access-Control-Allow-Origin'] = '*';\n  //   return config;\n  // });\n  axios.defaults.headers.common[\"Authorization\"] = `Token ${token}`;\n};\n\nexport const removeRequestsTokenFromAxios = () => {\n  // axios.interceptors.request.user(config => {\n  // \tconfig.headers.Authorization = null;\n  // \treturn config;\n  // });\n  axios.defaults.headers.common[\"Authorization\"] = null;\n};\n","import React, { createContext, useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\n\nimport { getUserData } from \"../helpers/requests\";\nimport { generateElectionLinks } from \"../helpers/elections\";\nimport {\n  addRequestsTokenToAxios,\n  removeRequestsTokenFromAxios,\n} from \"../helpers/auth\";\n\nconst initialAuth = {\n  isAuthenticated: false,\n  user: { elections: [], votes: [], electionLinks: [] },\n  APIUrl: \"\",\n};\n\nexport const AuthContext = createContext({});\n\nwindow.onbeforeunload = function () {\n  localStorage.clear();\n};\n\nexport const AuthProvider = ({ APIUrl, children }) => {\n  initialAuth.APIUrl = APIUrl;\n  let [auth, setAuth] = useState(initialAuth);\n\n  useEffect(() => {\n    let isAuthenticated = Boolean(localStorage.getItem(\"isAuthenticated\"));\n    isAuthenticated = isAuthenticated === true ? true : false;\n    let user = {};\n    try {\n      user = JSON.parse(localStorage.getItem(\"user\"));\n      if (!user) {\n        throw new Error(\"Invalid user\");\n      }\n    } catch (error) {\n      user = initialAuth.user;\n    }\n\n    setAuth((p) => ({ ...p, isAuthenticated, user }));\n  }, []);\n\n  function login(\n    userData,\n    successCb = () => {},\n    errorCb = () => {},\n    isSignup = false\n  ) {\n    const requestUrl = `${APIUrl}accounts/${isSignup ? \"register\" : \"login\"}/`;\n    axios\n      .post(requestUrl, userData)\n      .then((response) => {\n        const { token } = response.data;\n        if (token) {\n          setAuth((p) => {\n            p = JSON.parse(JSON.stringify(p));\n            p.isAuthenticated = true;\n            localStorage.setItem(\"isAuthenticated\", p.isAuthenticated);\n            return p;\n          });\n        }\n        addRequestsTokenToAxios(token);\n        syncUserData()\n        successCb(response);\n      })\n      .catch((error) => {\n        console.log(error);\n        errorCb(error);\n      });\n  }\n\n  function logout(successCb = () => {}, errorCb = () => {}) {\n    localStorage.setItem(\"isAuthenticated\", false);\n    localStorage.setItem(\"user\", JSON.stringify(initialAuth.user));\n    setAuth(initialAuth);\n    axios\n      .get(`${APIUrl}accounts/logout`)\n      .then((response) => {\n        successCb(response);\n      })\n      .catch((error) => {\n        console.log(error);\n        errorCb(error);\n      });\n    removeRequestsTokenFromAxios();\n  }\n\n  function signup(userData, successCb = () => {}, errorCb = () => {}) {\n    login(userData, successCb, errorCb, true);\n  }\n\n  function syncUserData() {\n    return getUserData(auth.APIUrl)\n      .then((response) => {\n        const [electionsResponse, votesResponse] = response;\n        const elections = electionsResponse.data;\n        const votes = votesResponse.data;\n        const electionLinks = generateElectionLinks(elections);\n        const user = { elections, votes, electionLinks };\n        localStorage.setItem(\"user\", JSON.stringify(user));\n\n        setAuth((p) => ({ ...p, user }));\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  return (\n    <AuthContext.Provider value={{ ...auth, login, logout, signup, syncUserData }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n\n  return context;\n}\n","import axios from 'axios';\n\nexport function getUserData(APIUrl) {\n  const electionsUrl = `${APIUrl}elections/`;\n  const votesUrl = `${APIUrl}votes/`;\n  const electionsPromise = axios.get(electionsUrl);\n  const votesPromise = axios.get(votesUrl);\n  return Promise.all([electionsPromise, votesPromise]);\n}\n\nexport function deleteVote(APIUrl, voteId) {\n  return axios.delete(`${APIUrl}votes/delete/${voteId}`);\n}\n\nexport function submitVote(APIUrl, data) {\n  return axios.post(`${APIUrl}votes/submit/`, data);\n}","import { generatePath } from \"react-router-dom\";\n\nexport function generateElectionLinks(elections) {\n  const links = elections.map(({ _type, state, year, id }) => ({\n    path: generatePath(\"/elections/:year/:state/:type\", {\n      year,\n      state,\n      type: _type,\n    }),\n    content: `${_type} (${state} ${year})`,\n    election_id: id,\n  }));\n  console.log(links);\n  return links;\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function DropdownMenuLinks(props) {\r\n  const { links } = props;\r\n  return (\r\n    <ul className=\"dropdownmenu-links\">\r\n      {links.map(({ content, path }, index) => (\r\n        <Link to={path} key={index}>\r\n          <li className=\"dropdownmenu-link\" key={content}>\r\n            {content}\r\n          </li>\r\n        </Link>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default function DropdownMenu(props) {\r\n  const { links, children } = props;\r\n\r\n  return (\r\n    <div className=\"dropdownmenu\">\r\n      {children}\r\n      {links.length === 0 ? <></> : <DropdownMenuLinks links={links} />}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\n\r\nimport DropdownMenu from \"./DropdownMenu\";\r\n\r\n/*\r\n\r\nelectionData template\r\n[\r\n    \"election type\"\r\n]\r\n\r\nelectionLinks template\r\n[\r\n    { \r\n        content: \"electio type\".capitalized(),\r\n        path: /elections/\"election type\"\r\n    }\r\n]\r\n\r\n*/\r\n\r\nfunction AuthenticatedNavLinks({ navToggled, electionLinks }) {\r\n  return (\r\n    <ul className={`nav-links ${navToggled ? \"open\" : \"\"}`}>\r\n      <DropdownMenu links={electionLinks} key=\"elections\">\r\n        <li className=\"nav-link nav-link-btn\">Elections</li>\r\n      </DropdownMenu>\r\n      <Link to=\"/results\" key=\"results\">\r\n        <li className=\"nav-link nav-link-btn\">Results</li>\r\n      </Link>\r\n      <Link to=\"/votes\" key=\"votes\">\r\n        <li className=\"nav-link nav-link-btn\">Your Votes</li>\r\n      </Link>\r\n      <Link to=\"/logout\" key=\"logout\">\r\n        <li className=\"nav-link  nav-link-btn\">Logout</li>\r\n      </Link>\r\n    </ul>\r\n  );\r\n}\r\n\r\nfunction UnauthenticatedNavLinks({ navToggled }) {\r\n  return (\r\n    <ul className={`nav-links ${navToggled ? \"open\" : \"\"}`}>\r\n      <Link to=\"/login\" key=\"login\">\r\n        <li className=\"nav-link  nav-link-btn\">Login</li>\r\n      </Link>\r\n      <Link to=\"/signup\" key=\"signup\">\r\n        <li className=\"nav-link nav-link-btn\">Sign Up</li>\r\n      </Link>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default function Navbar() {\r\n  const {\r\n    isAuthenticated,\r\n    user: { electionLinks },\r\n  } = useAuth();\r\n  let [navToggled, setNavToggled] = useState(false);\r\n  const toggle = () => {\r\n    setNavToggled((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <Link to=\"/\">\r\n        <h3 className=\"nav-logo\">React Vote</h3>\r\n      </Link>\r\n      <div className={`hamburger ${navToggled ? \"open\" : \"\"}`} onClick={toggle}>\r\n        <div className=\"line-1 line\"></div>\r\n        <div className=\"line-2 line\"></div>\r\n        <div className=\"line-3 line\"></div>\r\n      </div>\r\n      {isAuthenticated ? (\r\n        <AuthenticatedNavLinks\r\n          navToggled={navToggled}\r\n          electionLinks={electionLinks}\r\n        />\r\n      ) : (\r\n        <UnauthenticatedNavLinks navToggled={navToggled} />\r\n      )}\r\n    </nav>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { useAuth } from \"../contexts/AuthConext\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport default function ProtectedRoute({ component: Component, ...rest }) {\n  const { isAuthenticated } = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        if (isAuthenticated) {\n          return <Component {...props} />;\n        } else {\n          return (\n            <Redirect\n              to={{\n                pathname: props.redirect,\n                state: { from: props.location },\n              }}\n            />\n          );\n        }\n      }}\n    />\n  );\n}\n\nexport function UnprotectedRoute({ component: Component, ...rest }) {\n  const { isAuthenticated } = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        if (!isAuthenticated) {\n          return <Component {...props} />;\n        } else {\n          return (\n            <Redirect\n              to={{\n                pathname: props.redirect,\n                state: { from: props.location },\n              }}\n            />\n          );\n        }\n      }}\n    />\n  );\n}\n","import React from \"react\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div className=\"container homepage\">\r\n      <h2 className=\"container-title\">Welcome To React Vote:</h2>\r\n      <h3 className=\"container-subtitle\">\r\n        React Vote is a simple web app that is built using React, Django, and\r\n        the Django REST Framework. It gives you the opportunity to signup for an\r\n        account which would then give you access to the elections that match\r\n        your state. You can view your elections, change your vote, and view your\r\n        previous votes. This website is built by Mena Filfil. (\r\n        <a href=\"https://github.com/menamonmon\">visit my GitHub page</a>)\r\n      </h3>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\n\nexport default function FormError(props) {\n  const { errors, type } = props;\n  if (![\"warning\", \"error\"].includes(type)) {\n    return <>PROBLEM WITH ERROR TYPE PROP</>;\n  }\n  const containerClassName = `form-error ${type}`;\n  return (\n    <div className={containerClassName}>\n      <ul className=\"error-list\">\n        {errors.map((e) => (\n          <li key={e}>{e}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\nimport FormError from \"../components/FormError\";\r\n\r\nconst initialLoginData = {\r\n  username: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst initialLoginErrorsData = {\r\n  username: [],\r\n  password: [],\r\n};\r\n\r\nfunction errorToFormErrorComponent(errors) {\r\n  const cats = Object.keys(errors);\r\n  const final = {};\r\n  for (let key of cats) {\r\n    let currentErrors = errors[key];\r\n    let error = <></>;\r\n    if (currentErrors.length > 0) {\r\n      error = <FormError errors={currentErrors} type=\"error\" />;\r\n    }\r\n    final[key] = error;\r\n  }\r\n  return final;\r\n}\r\n\r\nexport default function LoginForm(props) {\r\n  const { redirect } = props;\r\n  const { login } = useAuth();\r\n  const history = useHistory();\r\n\r\n  // The Component's states\r\n  let [formData, setForm] = useState(initialLoginData);\r\n  let [errors, setErrors] = useState(initialLoginErrorsData);\r\n\r\n  // A fuction that will validate all the data in the form\r\n  const validateFormData = (fd) => {\r\n    let fieldsAreMissing = false;\r\n    for (const [field, data] of Object.entries(fd)) {\r\n      if (data.trim() === \"\") {\r\n        fieldsAreMissing = true;\r\n        setErrors((prev) => {\r\n          const errorList = [...prev[field]];\r\n          errorList.push(`${field.replaceAll(\"_\", \" \")} is missing.`);\r\n          return { ...prev, [field]: errorList };\r\n        });\r\n      }\r\n    }\r\n    return !fieldsAreMissing;\r\n  };\r\n\r\n  // A function that would run the necessary validations before performing the onSubmit action from the props\r\n  const submitForm = (e) => {\r\n    setErrors(initialLoginErrorsData);\r\n    const isFormDataValid = validateFormData(formData);\r\n    if (!isFormDataValid) {\r\n      return false;\r\n    }\r\n\r\n    function loginSuccessCallback() {\r\n      history.push(\"/\");\r\n    }\r\n\r\n    function loginErrorCallback(error) {\r\n      if (!error.response || error.response.status !== 400) {\r\n        console.log(error);\r\n        return false;\r\n      }\r\n      const errorMessage = \"invalid username and/or password.\";\r\n      setErrors((prev) => {\r\n        const usernameErrors = [...prev.username];\r\n        usernameErrors.push(errorMessage);\r\n        return { ...prev, username: usernameErrors };\r\n      });\r\n    }\r\n\r\n    login(formData, loginSuccessCallback, loginErrorCallback);\r\n  };\r\n\r\n  // A function that updates the formData as the data changes in the input fields below\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Converting the errors state into displayable compoenents\r\n  const errorComponents = errorToFormErrorComponent(errors);\r\n  return (\r\n    <form className=\"auth-form container\">\r\n      <h2 className=\"auth-form-title container-title\">Login to React Vote</h2>\r\n      <label className=\"form-label login-label\">\r\n        Username:\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={formData.username}\r\n          onChange={handleChange}\r\n          className=\"form-field login username-input\"\r\n          name=\"username\"\r\n        />\r\n        {errorComponents.username}\r\n      </label>\r\n      <label className=\"form-label login-label\">\r\n        Password:\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={formData.password}\r\n          onChange={handleChange}\r\n          className=\"form-field login password-input\"\r\n          name=\"password\"\r\n        />\r\n        {errorComponents.password}\r\n      </label>\r\n      <button\r\n        className=\"form-submit-btn container-btn\"\r\n        type=\"button\"\r\n        onClick={submitForm}\r\n      >\r\n        Login\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthConext\";\n\nexport default function LogoutPage() {\n  const { logout } = useAuth();\n\n  useEffect(() => {\n    logout();\n  }, []);\n\n  return (\n    <div className=\"logout-page auth-form container\">\n      <h2 className=\"auth-form-title logout-title container-title\">Logout</h2>\n      <h5 className=\"logout-content container-subtitle\">\n        You are successfully logged out.\n      </h5>\n      <div className=\"logout-footer\">\n        <Link to=\"/login\" key=\"login\">\n          Login again.\n        </Link>\n        <br />\n        Don't have an account?{\" \"}\n        <Link to=\"/signup\" key=\"signup\">\n          Sign up\n        </Link>{\" \"}\n        from here.\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nexport function CandidateResult({ id, name, party, voteCount }) {\n  return (\n    <div className=\"candidate-result-box\" key={id}>\n      <h6 className=\"container-button container-subtitle\">\n        {`${name} (${party})`}\n        <br />\n        Vote Count: {voteCount}\n      </h6>\n    </div>\n  );\n}\n\nexport function ArrowButton({ toggled, onClick }) {\n  return (\n    <div onClick={onClick} className={`arrow-btn ${toggled ? \"open\" : \"\"}`}>\n      ⯈\n    </div>\n  );\n}\n\nexport function CandidatesResultsContainer({ toggled, candidates }) {\n  return (\n    <div className={`candidates-results-container ${toggled ? \"open\" : \"\"}`}>\n      {candidates.map(({ id, name, party, vote_count }) => (\n        <CandidateResult\n          name={name}\n          party={party}\n          voteCount={vote_count}\n          key={id}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default function ResultBox({\n  election: { _type, state, year, candidate_set },\n}) {\n  const [toggled, setToggled] = useState(false);\n  function onToggle() {\n    setToggled((prev) => !prev);\n  }\n\n  return (\n    <div className=\"container-btn result-box\" onClick={onToggle}>\n      <div className=\"result-box-header\" key=\"result-box-header\">\n        <h4 className=\"conatiner-subtitle\">{`${_type} (${year} ${state})`}</h4>\n        <ArrowButton toggled={toggled} />\n      </div>\n      <CandidatesResultsContainer\n        candidates={candidate_set}\n        toggled={toggled}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport ResultBox from \"../components/ResultBox\";\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\n\r\nexport default function ResultsPage() {\r\n  const {\r\n    user: { elections },\r\n  } = useAuth();\r\n  return (\r\n    <div className=\"results-page container\">\r\n      <h3 className=\"container-title\">Here are your election results:</h3>\r\n      {elections.map((election) => (\r\n        <ResultBox election={election} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// validatePasswords(password, pass2)\n// Takes the two passwords, checks if they are matching\n// Checks the length of the two passwords\n// Checks for security concerns for passwords such as:\n//  having at least one uppercase char\n//  having at least one lowercase char\n//  having at least one number\n/////////  having at least one special symbol\n// Possible Errors Are:\n//  1) passwords don't match\n//  2) passwords don't meet the criteria (list the criteria)\n//  3) password is too short or too long\n// If the two passwords are correct true would be returned\n\nconst signupPasswordValidation = (\n  password,\n  password2,\n  minLength = 8,\n  maxLength = 50\n) => {\n  let errors = [];\n  if (password !== password2) {\n    errors.push(`passwords don't match.`);\n  }\n  if (password.length < minLength || password.length > maxLength) {\n    errors.push(\n      `the password's length must be between ${minLength} and ${maxLength}`\n    );\n  }\n  const validationRegex = /^.*(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).*$/;\n  if (!validationRegex.test(password)) {\n    errors = errors.concat([\n      \"your password must have at least one uppercase letter\",\n      \"your password must have at least one lowercase letter\",\n      \"your password must have at least one number\",\n    ]);\n    return errors;\n  }\n  if (errors.length !== 0) {\n    return errors;\n  }\n  return true;\n};\n\nexport { signupPasswordValidation };\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\nimport FormError from \"../components/FormError\";\r\nimport { signupPasswordValidation } from \"../helpers/passwordValidations\";\r\nimport axios from \"axios\";\r\n\r\nconst initialSignupData = {\r\n  username: \"\",\r\n  state: \"\",\r\n  password: \"\",\r\n  confirm_password: \"\",\r\n};\r\n\r\nconst initialSignupErrorsData = {\r\n  username: [],\r\n  state: [],\r\n  password: [],\r\n  confirm_password: [],\r\n};\r\n\r\nfunction errorToFormErrorComponent(errors) {\r\n  const cats = Object.keys(errors);\r\n  const final = {};\r\n  for (let key of cats) {\r\n    let currentErrors = errors[key];\r\n    let error = <></>;\r\n    if (currentErrors.length > 0) {\r\n      error = <FormError errors={currentErrors} type=\"error\" />;\r\n    }\r\n    final[key] = error;\r\n  }\r\n  return final;\r\n}\r\n\r\nexport default function SignupForm({ redirect }) {\r\n  const { signup, APIUrl } = useAuth();\r\n  const history = useHistory();\r\n  let [statesList, setStatesList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${APIUrl}users/states`)\r\n      .then(({ data }) => {\r\n        data = data.map(([value, content]) => ({ value, content }));\r\n        setStatesList(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  // The Component's states\r\n  let [formData, setForm] = useState(initialSignupData);\r\n  let [errors, setErrors] = useState(initialSignupErrorsData);\r\n\r\n  // A fuction that will validate all the data in the form\r\n  const validateFormData = (fd) => {\r\n    let fieldsAreMissing = false;\r\n    for (const [field, data] of Object.entries(fd)) {\r\n      if (data.trim() === \"\") {\r\n        fieldsAreMissing = true;\r\n        setErrors((prev) => {\r\n          const errorList = [...prev[field]];\r\n          errorList.push(`${field.replaceAll(\"_\", \" \")} is missing.`);\r\n          return { ...prev, [field]: errorList };\r\n        });\r\n      }\r\n    }\r\n    if (fieldsAreMissing) {\r\n      return false;\r\n    }\r\n\r\n    const { password, confirm_password } = fd;\r\n    const passwordsValidation = signupPasswordValidation(\r\n      password,\r\n      confirm_password\r\n    );\r\n    if (passwordsValidation === true) {\r\n      return true;\r\n    } else {\r\n      setErrors((prev) => {\r\n        let confirmPasswordErrorList = [...prev.confirm_password];\r\n        confirmPasswordErrorList = confirmPasswordErrorList.concat(\r\n          passwordsValidation\r\n        );\r\n        return { ...prev, confirm_password: confirmPasswordErrorList };\r\n      });\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // A function that would run the necessary validations before performing the onSubmit action from the props\r\n  const submitForm = (e) => {\r\n    setErrors(initialSignupErrorsData);\r\n    const isFormDataValid = validateFormData(formData);\r\n    if (!isFormDataValid) {\r\n      return false;\r\n    }\r\n\r\n    function signupSuccessCallback() {\r\n      history.push(redirect);\r\n    }\r\n\r\n    function signupErrorCallback(error) {\r\n      if (!error.response || error.response.status !== 400) {\r\n        console.log(error);\r\n        return false;\r\n      }\r\n      const errorMessage = \"invalid username and/or password.\";\r\n      setErrors((prev) => {\r\n        const usernameErrors = [...prev.username];\r\n        usernameErrors.push(errorMessage);\r\n        return { ...prev, username: usernameErrors };\r\n      });\r\n    }\r\n\r\n    signup(formData, signupSuccessCallback, signupErrorCallback);\r\n  };\r\n\r\n  // A function that updates the formData as the data changes in the input fields below\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Converting the errors state into displayable compoenents\r\n  const errorComponents = errorToFormErrorComponent(errors);\r\n  return (\r\n    <form className=\"auth-form container\">\r\n      <h2 className=\"auth-form-title container-title\">Signup for React Vote</h2>\r\n      <label className=\"form-label signup-label\">\r\n        Username:\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={formData.username}\r\n          onChange={handleChange}\r\n          className=\"form-field signup username-input\"\r\n          name=\"username\"\r\n        />\r\n        {errorComponents.username}\r\n      </label>\r\n      <label className=\"form-label signup-label\">\r\n        State:\r\n        <select\r\n          value={formData.state}\r\n          onChange={handleChange}\r\n          className=\"form-field form-datalist signup state-input\"\r\n          name=\"state\"\r\n        >\r\n          {statesList.map(({ value, content }) => (\r\n            <option key={value} value={value}>\r\n              {content}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        {errorComponents.state}\r\n      </label>\r\n      <label className=\"form-label signup-label\">\r\n        Password:\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={formData.password}\r\n          onChange={handleChange}\r\n          className=\"form-field signup password-input\"\r\n          name=\"password\"\r\n        />\r\n        {errorComponents.password}\r\n      </label>\r\n      <label className=\"form-label signup-label\">\r\n        Confirm Password:\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Confirm Password\"\r\n          value={formData.confirm_password}\r\n          onChange={handleChange}\r\n          className=\"form-field signup confirm-password-input\"\r\n          name=\"confirm_password\"\r\n        />\r\n        {errorComponents.confirm_password}\r\n      </label>\r\n      <button\r\n        className=\"form-submit-btn container-btn\"\r\n        type=\"button\"\r\n        onClick={submitForm}\r\n      >\r\n        Sign Up\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Vote({ election, candidate, link }) {\n  return (\n    <Link\n      to={link.path}\n      title=\"Go to this election\"\n      style={{ textDecoration: \"none\" }}\n    >\n      <div className=\"vote-box container-btn\">\n        <h5 className=\"vote-subtitle\">\n          E: {`${election.state} ${election._type} (${election.year})`}\n        </h5>\n        <h5 className=\"vote-subtitle\">\n          C: {`${candidate.name} (${candidate.party})`}\n        </h5>\n      </div>\n    </Link>\n  );\n}\n","import React from \"react\";\r\nimport Vote from \"../components/Vote\";\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\n\r\nexport default function VotesPage() {\r\n  const {\r\n    user: { votes, electionLinks },\r\n  } = useAuth();\r\n\r\n  function getElectionLink(election, links) {\r\n    const { id } = election;\r\n    for (const link of links) {\r\n      if (link.election_id === id) {\r\n        return link;\r\n      }\r\n    }\r\n    throw new Error(\"Election Link Not Found\");\r\n  }\r\n  return (\r\n    <div className=\"votes-page container\">\r\n      <h2 className=\"auth-form-title container-title\">Here are your votes:</h2>\r\n      <h4 className=\"container-subtitle\">{\"Election (E) and Candidate (C)\"}</h4>\r\n      {votes.map(({ id, election, candidate }) => (\r\n        <Vote\r\n          candidate={candidate}\r\n          election={election}\r\n          link={getElectionLink(election, electionLinks)}\r\n          key={id}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { deleteVote, submitVote } from \"../helpers/requests\";\r\nimport { useAuth } from \"../contexts/AuthConext\";\r\n\r\nexport function CandidateBox(props) {\r\n  const { name, party, checked } = props;\r\n  return (\r\n    <div\r\n      className={`container-btn candidate-box ${checked ? \"checked\" : \"\"}`}\r\n      onClick={props.onClick}\r\n    >\r\n      <h5 className=\"title\">{`${name} (${party})`}</h5>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst CurrentCandidate = ({ name }) => (\r\n  <h4 className=\"container-subtitle current-candidate\">\r\n    {name ? `Chosen Candidate: ${name}` : \"No Candidate Chosen Yet\"}\r\n  </h4>\r\n);\r\n\r\nfunction ElectionFooter({ currentCandidate, onSubmit, onDelete }) {\r\n  return (\r\n    <div className=\"election-footer\">\r\n      <CurrentCandidate name={currentCandidate.name} />\r\n      <button\r\n        className=\"election-delete-btn container-btn form-submit-btn\"\r\n        onClick={onDelete}\r\n      >\r\n        Clear Vote\r\n      </button>\r\n      <button\r\n        className=\"election-submit-btn container-btn form-submit-btn\"\r\n        onClick={onSubmit}\r\n      >\r\n        Submit Vote\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Election(props) {\r\n  const { type, id, state, year, candidates } = props;\r\n\r\n  const {\r\n    APIUrl,\r\n    syncUserData,\r\n    user: { votes },\r\n  } = useAuth();\r\n\r\n  useEffect(() => {\r\n    setVote(loadVotes(votes));\r\n  }, []);\r\n\r\n  let [currentCandidate, setCurrentCandidate] = useState({});\r\n  let [vote, setVote] = useState({});\r\n  let [checkedCandidates, setCheckedCandidates] = useState(\r\n    Array(candidates.length).fill(false)\r\n  );\r\n\r\n  function loadVotes(votes) {\r\n    for (const vote of votes) {\r\n      if (vote.election.id === id) {\r\n        const candidate_id = vote.candidate.id;\r\n        const matchingCandidates = candidates.filter(\r\n          (candidate) => candidate.id === candidate_id\r\n        );\r\n        if (matchingCandidates.length !== 1) {\r\n          throw Error(\"Candidate ID Not Valid\");\r\n        }\r\n        const candidate = matchingCandidates[0];\r\n        const candidateIndex = candidates.indexOf(candidate);\r\n        setCheckedCandidates((p) => {\r\n          const prevCandidateIndex = candidates.indexOf(currentCandidate);\r\n          p[prevCandidateIndex] = false;\r\n          p[candidateIndex] = true;\r\n          return p;\r\n        });\r\n        setCurrentCandidate(candidate);\r\n        return vote;\r\n      }\r\n    }\r\n    setCheckedCandidates(Array(candidates.length).fill(false));\r\n  }\r\n\r\n  function submitElectionVote() {\r\n    const data = {\r\n      election_id: id,\r\n      candidate_id: currentCandidate.id,\r\n    };\r\n    if (Object.values(data).includes(undefined)) return;\r\n    submitVote(APIUrl, data).then(() => {\r\n      syncUserData().then(() => {\r\n        setVote(loadVotes(votes));\r\n      });\r\n    });\r\n  }\r\n\r\n  function deleteElectionVote() {\r\n    if (vote === undefined) {\r\n      setVote(loadVotes(votes));\r\n      return;\r\n    }\r\n    if (vote.id === undefined) return;\r\n    deleteVote(APIUrl, vote.id).then(() => {\r\n      syncUserData().then(() => {\r\n        setVote(loadVotes(votes));\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"election-container container\" key={id}>\r\n      <h3 className=\"election-type container-title\">\r\n        {`${state} ${type} Elections (${year}):`}\r\n      </h3>\r\n      <h4 className=\"container-subtitle\">\r\n        Choose One of The Candidates Below:\r\n      </h4>\r\n      <ul className=\"candidates-list\">\r\n        {candidates.map((candidate, index) => {\r\n          const { name, party, id } = candidate;\r\n          const onClick = () => {\r\n            setCurrentCandidate(candidate);\r\n            setCheckedCandidates((prevState) => {\r\n              prevState.fill(false);\r\n              prevState[index] = true;\r\n              return prevState;\r\n            });\r\n          };\r\n          return (\r\n            <CandidateBox\r\n              checked={checkedCandidates[index]}\r\n              name={name}\r\n              party={party}\r\n              onClick={onClick}\r\n              key={id}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n      <ElectionFooter\r\n        currentCandidate={currentCandidate}\r\n        onSubmit={submitElectionVote}\r\n        onDelete={deleteElectionVote}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function electionsList(elections) {\r\n  return elections.map(({ _type, id, state, year, candidate_set }) => (\r\n    <Election\r\n      type={_type}\r\n      id={id}\r\n      state={state}\r\n      year={year}\r\n      candidates={candidate_set}\r\n    />\r\n  ));\r\n}\r\n","import React from \"react\";\nimport { electionsList } from \"./Election\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { useAuth } from \"../contexts/AuthConext\";\n\nexport default function ElectionRoutes() {\n  const {\n    user: { electionLinks, elections },\n  } = useAuth();\n  const electionComponenets = electionsList(elections);\n  return (\n    <>\n      {electionLinks.map(({ path }, index) => {\n        const { id } = elections[index];\n        const ElectionComponenet = () => electionComponenets[index];\n        return (\n          <ProtectedRoute\n            exact\n            path={path}\n            key={id}\n            redirect=\"/\"\n            component={ElectionComponenet}\n          />\n        );\n      })}\n    </>\n  );\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport \"./css/App.css\";\n\nimport Nav from \"./components/Nav\";\nimport ProtectedRoute, { UnprotectedRoute } from \"./components/ProtectedRoute\";\nimport {\n  Home,\n  LoginForm,\n  LogoutPage,\n  SignupForm,\n  VotesPage,\n  ResultsPage,\n} from \"./pages/\";\n\nimport { AuthProvider } from \"./contexts/AuthConext\";\nimport ElectionRoutes from \"./components/ElectionRoutes\";\n\nexport default function App() {\n  const APIUrl = \"http://menafilfil.pythonanywhere.com/\";\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <AuthProvider APIUrl={APIUrl}>\n          <Nav />\n          <Switch>\n            <Route exact path=\"/\" component={Home} key=\"home\" />\n            <UnprotectedRoute\n              exact\n              path=\"/login\"\n              redirect=\"/\"\n              component={LoginForm}\n              key=\"login\"\n            />\n            <UnprotectedRoute\n              exact\n              path=\"/signup\"\n              redirect=\"/\"\n              component={SignupForm}\n              key=\"signup\"\n            />\n            <Route\n              exact\n              path=\"/logout\"\n              redirect=\"/\"\n              component={LogoutPage}\n              key=\"logout\"\n            />\n            <ProtectedRoute\n              exact\n              path=\"/results\"\n              redirect=\"/\"\n              component={ResultsPage}\n              key=\"results\"\n            />\n            <ProtectedRoute\n              exact\n              path=\"/votes\"\n              redirect=\"/\"\n              component={VotesPage}\n              key=\"votes\"\n            />\n            <ElectionRoutes />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  );\n}\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\n\r\nimport App from './App';\r\n\r\nrender(<App />, document.getElementById('root'));"],"sourceRoot":""}