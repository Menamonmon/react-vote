(this["webpackJsonpreact-vote"]=this["webpackJsonpreact-vote"]||[]).push([[0],{40:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n(33),s=n(5),o=n(3),i=(n(40),n(4)),l=n(2),u=n(7),j=n.n(u);var d=function(e){j.a.defaults.headers.common.Authorization="Token ".concat(e)},b=function(){j.a.defaults.headers.common.Authorization=null},h={isAuthenticated:!1,user:{elections:[],votes:[],electionLinks:[]},APIUrl:""},m=Object(a.createContext)({});window.onbeforeunload=function(){localStorage.clear()};var O=function(e){var t=e.APIUrl,n=e.children;h.APIUrl=t;var r=Object(a.useState)(h),s=Object(i.a)(r,2),u=s[0],O=s[1];function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="".concat(t,"accounts/").concat(a?"register":"login","/");j.a.post(r,e).then((function(e){var t=e.data.token;t&&O((function(e){return(e=JSON.parse(JSON.stringify(e))).isAuthenticated=!0,localStorage.setItem("isAuthenticated",e.isAuthenticated),e})),d(t),v(),n(e)})).catch((function(e){console.log(e),c(e)}))}function v(){return function(e){var t="".concat(e,"elections/"),n="".concat(e,"votes/"),c=j.a.get(t),a=j.a.get(n);return Promise.all([c,a])}(u.APIUrl).then((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1],a=n.data,r=c.data,s=function(e){var t=e.map((function(e){var t=e._type,n=e.state,c=e.year,a=e.id;return{path:Object(o.f)("/elections/:year/:state/:type",{year:c,state:n,type:t}),content:"".concat(t," (").concat(n," ").concat(c,")"),election_id:a}}));return console.log(t),t}(a),u={elections:a,votes:r,electionLinks:s};localStorage.setItem("user",JSON.stringify(u)),O((function(e){return Object(l.a)(Object(l.a)({},e),{},{user:u})}))})).catch((function(e){console.log(e)}))}return Object(a.useEffect)((function(){var e=Boolean(localStorage.getItem("isAuthenticated"));e=!0===e;var t={};try{if(!(t=JSON.parse(localStorage.getItem("user"))))throw new Error("Invalid user")}catch(n){t=h.user}O((function(n){return Object(l.a)(Object(l.a)({},n),{},{isAuthenticated:e,user:t})}))}),[]),Object(c.jsx)(m.Provider,{value:Object(l.a)(Object(l.a)({},u),{},{login:f,logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};localStorage.setItem("isAuthenticated",!1),localStorage.setItem("user",JSON.stringify(h.user)),O(h),j.a.get("".concat(t,"accounts/logout")).then((function(t){e(t)})).catch((function(e){console.log(e),n(e)})),b()},signup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};f(e,t,n,!0)},syncUserData:v}),children:n})};function f(){return Object(a.useContext)(m)}function v(e){var t=e.links;return Object(c.jsx)("ul",{className:"dropdownmenu-links",children:t.map((function(e,t){var n=e.content,a=e.path;return Object(c.jsx)(s.b,{to:a,children:Object(c.jsx)("li",{className:"dropdownmenu-link",children:n},n)},t)}))})}function p(e){var t=e.links,n=e.children;return Object(c.jsxs)("div",{className:"dropdownmenu",children:[n,0===t.length?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)(v,{links:t})]})}function g(e){var t=e.navToggled,n=e.electionLinks;return Object(c.jsxs)("ul",{className:"nav-links ".concat(t?"open":""),children:[Object(c.jsx)(p,{links:n,children:Object(c.jsx)("li",{className:"nav-link nav-link-btn",children:"Elections"})},"elections"),Object(c.jsx)(s.b,{to:"/results",children:Object(c.jsx)("li",{className:"nav-link nav-link-btn",children:"Results"})},"results"),Object(c.jsx)(s.b,{to:"/votes",children:Object(c.jsx)("li",{className:"nav-link nav-link-btn",children:"Your Votes"})},"votes"),Object(c.jsx)(s.b,{to:"/logout",children:Object(c.jsx)("li",{className:"nav-link  nav-link-btn",children:"Logout"})},"logout")]})}function x(e){var t=e.navToggled;return Object(c.jsxs)("ul",{className:"nav-links ".concat(t?"open":""),children:[Object(c.jsx)(s.b,{to:"/login",children:Object(c.jsx)("li",{className:"nav-link  nav-link-btn",children:"Login"})},"login"),Object(c.jsx)(s.b,{to:"/signup",children:Object(c.jsx)("li",{className:"nav-link nav-link-btn",children:"Sign Up"})},"signup")]})}function N(){var e=f(),t=e.isAuthenticated,n=e.user.electionLinks,r=Object(a.useState)(!1),o=Object(i.a)(r,2),l=o[0],u=o[1];return Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsx)(s.b,{to:"/",children:Object(c.jsx)("h3",{className:"nav-logo",children:"React Vote"})}),Object(c.jsxs)("div",{className:"hamburger ".concat(l?"open":""),onClick:function(){u((function(e){return!e}))},children:[Object(c.jsx)("div",{className:"line-1 line"}),Object(c.jsx)("div",{className:"line-2 line"}),Object(c.jsx)("div",{className:"line-3 line"})]}),t?Object(c.jsx)(g,{navToggled:l,electionLinks:n}):Object(c.jsx)(x,{navToggled:l})]})}var y=n(23);function w(e){var t=e.component,n=Object(y.a)(e,["component"]),a=f().isAuthenticated;return Object(c.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(c.jsx)(t,Object(l.a)({},e)):Object(c.jsx)(o.a,{to:{pathname:e.redirect,state:{from:e.location}}})}}))}function k(e){var t=e.component,n=Object(y.a)(e,["component"]),a=f().isAuthenticated;return Object(c.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(c.jsx)(o.a,{to:{pathname:e.redirect,state:{from:e.location}}}):Object(c.jsx)(t,Object(l.a)({},e))}}))}function C(){return Object(c.jsxs)("div",{className:"container homepage",children:[Object(c.jsx)("h2",{className:"container-title",children:"Welcome To React Vote:"}),Object(c.jsxs)("h3",{className:"container-subtitle",children:["React Vote is a simple web app that is built using React, Django, and the Django REST Framework. It gives you the opportunity to signup for an account which would then give you access to the elections that match your state. You can view your elections, change your vote, and view your previous votes. This website is built by Mena Filfil. (",Object(c.jsx)("a",{href:"https://github.com/menamonmon",children:"visit my GitHub page"}),")"]})]})}var S=n(12),A=n(14);function _(e){var t=e.errors,n=e.type;if(!["warning","error"].includes(n))return Object(c.jsx)(c.Fragment,{children:"PROBLEM WITH ERROR TYPE PROP"});var a="form-error ".concat(n);return Object(c.jsx)("div",{className:a,children:Object(c.jsx)("ul",{className:"error-list",children:t.map((function(e){return Object(c.jsx)("li",{children:e},e)}))})})}var P={username:"",password:""},E={username:[],password:[]};function I(e){e.redirect;var t=f().login,n=Object(o.h)(),r=Object(a.useState)(P),s=Object(i.a)(r,2),u=s[0],j=s[1],d=Object(a.useState)(E),b=Object(i.a)(d,2),h=b[0],m=b[1],O=function(e){var t=e.target,n=t.name,c=t.value;j((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(S.a)({},n,c))}))},v=function(e){for(var t={},n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],s=e[r],o=Object(c.jsx)(c.Fragment,{});s.length>0&&(o=Object(c.jsx)(_,{errors:s,type:"error"})),t[r]=o}return t}(h);return Object(c.jsxs)("form",{className:"auth-form container",children:[Object(c.jsx)("h2",{className:"auth-form-title container-title",children:"Login to React Vote"}),Object(c.jsxs)("label",{className:"form-label login-label",children:["Username:",Object(c.jsx)("input",{type:"text",placeholder:"Username",value:u.username,onChange:O,className:"form-field login username-input",name:"username"}),v.username]}),Object(c.jsxs)("label",{className:"form-label login-label",children:["Password:",Object(c.jsx)("input",{type:"password",placeholder:"Password",value:u.password,onChange:O,className:"form-field login password-input",name:"password"}),v.password]}),Object(c.jsx)("button",{className:"form-submit-btn container-btn",type:"button",onClick:function(e){if(m(E),!function(e){for(var t=!1,n=function(){var e=Object(i.a)(a[c],2),n=e[0];""===e[1].trim()&&(t=!0,m((function(e){var t=Object(A.a)(e[n]);return t.push("".concat(n.replaceAll("_"," ")," is missing.")),Object(l.a)(Object(l.a)({},e),{},Object(S.a)({},n,t))})))},c=0,a=Object.entries(e);c<a.length;c++)n();return!t}(u))return!1;t(u,(function(){n.push("/")}),(function(e){if(!e.response||400!==e.response.status)return console.log(e),!1;m((function(e){var t=Object(A.a)(e.username);return t.push("invalid username and/or password."),Object(l.a)(Object(l.a)({},e),{},{username:t})}))}))},children:"Login"})]})}function L(){var e=f().logout;return Object(a.useEffect)((function(){e()}),[]),Object(c.jsxs)("div",{className:"logout-page auth-form container",children:[Object(c.jsx)("h2",{className:"auth-form-title logout-title container-title",children:"Logout"}),Object(c.jsx)("h5",{className:"logout-content container-subtitle",children:"You are successfully logged out."}),Object(c.jsxs)("div",{className:"logout-footer",children:[Object(c.jsx)(s.b,{to:"/login",children:"Login again."},"login"),Object(c.jsx)("br",{}),"Don't have an account?"," ",Object(c.jsx)(s.b,{to:"/signup",children:"Sign up"},"signup")," ","from here."]})]})}function U(e){var t=e.id,n=e.name,a=e.party,r=e.voteCount;return Object(c.jsx)("div",{className:"candidate-result-box",children:Object(c.jsxs)("h6",{className:"container-button container-subtitle",children:["".concat(n," (").concat(a,")"),Object(c.jsx)("br",{}),"Vote Count: ",r]})},t)}function R(e){var t=e.toggled,n=e.onClick;return Object(c.jsx)("div",{onClick:n,className:"arrow-btn ".concat(t?"open":""),children:"\u2bc8"})}function T(e){var t=e.toggled,n=e.candidates;return Object(c.jsx)("div",{className:"candidates-results-container ".concat(t?"open":""),children:n.map((function(e){var t=e.id,n=e.name,a=e.party,r=e.vote_count;return Object(c.jsx)(U,{name:n,party:a,voteCount:r},t)}))})}function V(e){var t=e.election,n=t._type,r=t.state,s=t.year,o=t.candidate_set,l=Object(a.useState)(!1),u=Object(i.a)(l,2),j=u[0],d=u[1];return Object(c.jsxs)("div",{className:"container-btn result-box",onClick:function(){d((function(e){return!e}))},children:[Object(c.jsxs)("div",{className:"result-box-header",children:[Object(c.jsx)("h4",{className:"conatiner-subtitle",children:"".concat(n," (").concat(s," ").concat(r,")")}),Object(c.jsx)(R,{toggled:j})]},"result-box-header"),Object(c.jsx)(T,{candidates:o,toggled:j})]})}function D(){var e=f().user.elections;return Object(c.jsxs)("div",{className:"results-page container",children:[Object(c.jsx)("h3",{className:"container-title",children:"Here are your election results:"}),e.map((function(e){return Object(c.jsx)(V,{election:e})}))]})}var F={username:"",state:"",password:"",confirm_password:""},J={username:[],state:[],password:[],confirm_password:[]};function Y(e){var t=e.redirect,n=f(),r=n.signup,s=n.APIUrl,u=Object(o.h)(),d=Object(a.useState)([]),b=Object(i.a)(d,2),h=b[0],m=b[1];Object(a.useEffect)((function(){j.a.get("".concat(s,"users/states")).then((function(e){var t=e.data;t=t.map((function(e){var t=Object(i.a)(e,2);return{value:t[0],content:t[1]}})),m(t)})).catch((function(e){console.log(e)}))}),[]);var O=Object(a.useState)(F),v=Object(i.a)(O,2),p=v[0],g=v[1],x=Object(a.useState)(J),N=Object(i.a)(x,2),y=N[0],w=N[1],k=function(e){var t=e.target,n=t.name,c=t.value;g((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(S.a)({},n,c))}))},C=function(e){for(var t={},n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],s=e[r],o=Object(c.jsx)(c.Fragment,{});s.length>0&&(o=Object(c.jsx)(_,{errors:s,type:"error"})),t[r]=o}return t}(y);return Object(c.jsxs)("form",{className:"auth-form container",children:[Object(c.jsx)("h2",{className:"auth-form-title container-title",children:"Signup for React Vote"}),Object(c.jsxs)("label",{className:"form-label signup-label",children:["Username:",Object(c.jsx)("input",{type:"text",placeholder:"Username",value:p.username,onChange:k,className:"form-field signup username-input",name:"username"}),C.username]}),Object(c.jsxs)("label",{className:"form-label signup-label",children:["State:",Object(c.jsx)("select",{value:p.state,onChange:k,className:"form-field form-datalist signup state-input",name:"state",children:h.map((function(e){var t=e.value,n=e.content;return Object(c.jsx)("option",{value:t,children:n},t)}))}),C.state]}),Object(c.jsxs)("label",{className:"form-label signup-label",children:["Password:",Object(c.jsx)("input",{type:"password",placeholder:"Password",value:p.password,onChange:k,className:"form-field signup password-input",name:"password"}),C.password]}),Object(c.jsxs)("label",{className:"form-label signup-label",children:["Confirm Password:",Object(c.jsx)("input",{type:"password",placeholder:"Confirm Password",value:p.confirm_password,onChange:k,className:"form-field signup confirm-password-input",name:"confirm_password"}),C.confirm_password]}),Object(c.jsx)("button",{className:"form-submit-btn container-btn",type:"button",onClick:function(e){if(w(J),!function(e){for(var t=!1,n=function(){var e=Object(i.a)(a[c],2),n=e[0];""===e[1].trim()&&(t=!0,w((function(e){var t=Object(A.a)(e[n]);return t.push("".concat(n.replaceAll("_"," ")," is missing.")),Object(l.a)(Object(l.a)({},e),{},Object(S.a)({},n,t))})))},c=0,a=Object.entries(e);c<a.length;c++)n();if(t)return!1;var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,a=[];return e!==t&&a.push("passwords don't match."),(e.length<n||e.length>c)&&a.push("the password's length must be between ".concat(n," and ").concat(c)),/^.*(?=.*[a-z])(?=.*[A-Z])(?=.*\d).*$/.test(e)?0===a.length||a:a=a.concat(["your password must have at least one uppercase letter","your password must have at least one lowercase letter","your password must have at least one number"])}(e.password,e.confirm_password);return!0===r||(w((function(e){var t=Object(A.a)(e.confirm_password);return t=t.concat(r),Object(l.a)(Object(l.a)({},e),{},{confirm_password:t})})),!1)}(p))return!1;r(p,(function(){u.push(t)}),(function(e){if(!e.response||400!==e.response.status)return console.log(e),!1;w((function(e){var t=Object(A.a)(e.username);return t.push("invalid username and/or password."),Object(l.a)(Object(l.a)({},e),{},{username:t})}))}))},children:"Sign Up"})]})}var B=n(18);function H(e){var t=e.election,n=e.candidate,a=e.link;return Object(c.jsx)(s.b,{to:a.path,title:"Go to this election",style:{textDecoration:"none"},children:Object(c.jsxs)("div",{className:"vote-box container-btn",children:[Object(c.jsxs)("h5",{className:"vote-subtitle",children:["E: ","".concat(t.state," ").concat(t._type," (").concat(t.year,")")]}),Object(c.jsxs)("h5",{className:"vote-subtitle",children:["C: ","".concat(n.name," (").concat(n.party,")")]})]})})}function z(){var e=f().user,t=e.votes,n=e.electionLinks;function a(e,t){var n,c=e.id,a=Object(B.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.election_id===c)return r}}catch(s){a.e(s)}finally{a.f()}throw new Error("Election Link Not Found")}return Object(c.jsxs)("div",{className:"votes-page container",children:[Object(c.jsx)("h2",{className:"auth-form-title container-title",children:"Here are your votes:"}),Object(c.jsx)("h4",{className:"container-subtitle",children:"Election (E) and Candidate (C)"}),t.map((function(e){var t=e.id,r=e.election,s=e.candidate;return Object(c.jsx)(H,{candidate:s,election:r,link:a(r,n)},t)}))]})}function G(e){var t=e.name,n=e.party,a=e.checked;return Object(c.jsx)("div",{className:"container-btn candidate-box ".concat(a?"checked":""),onClick:e.onClick,children:Object(c.jsx)("h5",{className:"title",children:"".concat(t," (").concat(n,")")})})}var M=function(e){var t=e.name;return Object(c.jsx)("h4",{className:"container-subtitle current-candidate",children:t?"Chosen Candidate: ".concat(t):"No Candidate Chosen Yet"})};function W(e){var t=e.currentCandidate,n=e.onSubmit,a=e.onDelete;return Object(c.jsxs)("div",{className:"election-footer",children:[Object(c.jsx)(M,{name:t.name}),Object(c.jsx)("button",{className:"election-delete-btn container-btn form-submit-btn",onClick:a,children:"Clear Vote"}),Object(c.jsx)("button",{className:"election-submit-btn container-btn form-submit-btn",onClick:n,children:"Submit Vote"})]})}function Z(e){var t=e.type,n=e.id,r=e.state,s=e.year,o=e.candidates,l=f(),u=l.APIUrl,d=l.syncUserData,b=l.user.votes;Object(a.useEffect)((function(){N(S(b))}),[]);var h=Object(a.useState)({}),m=Object(i.a)(h,2),O=m[0],v=m[1],p=Object(a.useState)({}),g=Object(i.a)(p,2),x=g[0],N=g[1],y=Object(a.useState)(Array(o.length).fill(!1)),w=Object(i.a)(y,2),k=w[0],C=w[1];function S(e){var t,c=Object(B.a)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;if(a.election.id===n){var r=function(){var e=a.candidate.id,t=o.filter((function(t){return t.id===e}));if(1!==t.length)throw Error("Candidate ID Not Valid");var n=t[0],c=o.indexOf(n);return C((function(e){return e[o.indexOf(O)]=!1,e[c]=!0,e})),v(n),{v:a}}();if("object"===typeof r)return r.v}}}catch(s){c.e(s)}finally{c.f()}C(Array(o.length).fill(!1))}return Object(c.jsxs)("div",{className:"election-container container",children:[Object(c.jsx)("h3",{className:"election-type container-title",children:"".concat(r," ").concat(t," Elections (").concat(s,"):")}),Object(c.jsx)("h4",{className:"container-subtitle",children:"Choose One of The Candidates Below:"}),Object(c.jsx)("ul",{className:"candidates-list",children:o.map((function(e,t){var n=e.name,a=e.party,r=e.id;return Object(c.jsx)(G,{checked:k[t],name:n,party:a,onClick:function(){v(e),C((function(e){return e.fill(!1),e[t]=!0,e}))}},r)}))}),Object(c.jsx)(W,{currentCandidate:O,onSubmit:function(){var e={election_id:n,candidate_id:O.id};Object.values(e).includes(void 0)||function(e,t){return j.a.post("".concat(e,"votes/submit/"),t)}(u,e).then((function(){d().then((function(){N(S(b))}))}))},onDelete:function(){void 0!==x?void 0!==x.id&&function(e,t){return j.a.delete("".concat(e,"votes/delete/").concat(t))}(u,x.id).then((function(){d().then((function(){N(S(b))}))})):N(S(b))}})]},n)}function $(){var e=f().user,t=e.electionLinks,n=e.elections,a=function(e){return e.map((function(e){var t=e._type,n=e.id,a=e.state,r=e.year,s=e.candidate_set;return Object(c.jsx)(Z,{type:t,id:n,state:a,year:r,candidates:s})}))}(n);return Object(c.jsx)(c.Fragment,{children:t.map((function(e,t){var r=e.path,s=n[t].id;return Object(c.jsx)(w,{exact:!0,path:r,redirect:"/",component:function(){return a[t]}},s)}))})}function q(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(s.a,{children:Object(c.jsxs)(O,{APIUrl:"https://menafilfil.pythonanywhere.com/",children:[Object(c.jsx)(N,{}),Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{exact:!0,path:"/",component:C},"home"),Object(c.jsx)(k,{exact:!0,path:"/login",redirect:"/",component:I},"login"),Object(c.jsx)(k,{exact:!0,path:"/signup",redirect:"/",component:Y},"signup"),Object(c.jsx)(o.b,{exact:!0,path:"/logout",redirect:"/",component:L},"logout"),Object(c.jsx)(w,{exact:!0,path:"/results",redirect:"/",component:D},"results"),Object(c.jsx)(w,{exact:!0,path:"/votes",redirect:"/",component:z},"votes"),Object(c.jsx)($,{})]})]})})})}Object(r.render)(Object(c.jsx)(q,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.ecbb8519.chunk.js.map